<html>

<head>
    <title>The Pages (Register)</title>
    <link rel="stylesheet" type="text/css" href="/stylesheet.css">

    <script src="https://s3.amazonaws.com/stitch-sdks/js/bundles/4.0.0/stitch.js"></script>

    <script>
        const {
            Stitch,
            UserPasswordAuthProviderClient
        } = stitch;

        const stitchClient = Stitch.initializeDefaultAppClient("thepages-qufuu");

        const emailPasswordClient = stitchClient.auth
            .getProviderClient(UserPasswordAuthProviderClient.factory);

        // Register a new application user when the user submits their information
        async function handleSignup() {
            const email = document.getElementById("regEmail").value;
            const password = document.getElementById("regPassword").value;

            try {

                await emailPasswordClient.registerWithEmail(email, password);
                console.log("Successfully registered. Check your inbox for a confirmation email.")

            } catch (e) {
                console.log(e.message);
            }
        }

    </script>

</head>

<body>
    <h1>Register With Email:</h1>
    <form>
        Email Address:
        <input type="email" id="regEmail"><br>
        New Password:
        <input type="password" id="regPassword"><br>
        <button type="button" onclick="handleSignup()">Register</button>
    </form>
</body>

</html>